# 云边数据同步配置文件
# 边缘站点配置示例

# ============================================================================
# 基本配置
# ============================================================================

# 站点信息
SITE_ID=1
SITE_CODE=HZ001
SITE_NAME=杭州总站

# ============================================================================
# 云端配置
# ============================================================================

# 云端API地址
CLOUD_API_URL=https://cloud.example.com

# API密钥（请妥善保管，不要提交到版本控制）
CLOUD_API_KEY=your-secure-api-key-here

# API超时时间（毫秒）
CLOUD_API_TIMEOUT=30000

# ============================================================================
# 同步配置
# ============================================================================

# 是否启用同步
SYNC_ENABLED=true

# 同步间隔（分钟）
SYNC_INTERVAL=5

# 批量大小（每次同步的最大记录数）
SYNC_BATCH_SIZE=100

# 失败重试次数
SYNC_RETRY_TIMES=3

# 重试延迟（秒）
SYNC_RETRY_DELAY=60

# ============================================================================
# 高级配置
# ============================================================================

# 实时同步延迟（秒，用于防抖）
SYNC_REALTIME_DELAY=30

# 是否启用压缩传输
SYNC_COMPRESSION=true

# 日志保留天数
SYNC_LOG_RETENTION_DAYS=30

# 冲突自动解决策略（latest_wins | edge_priority | manual）
SYNC_CONFLICT_RESOLUTION=latest_wins

# ============================================================================
# 性能优化
# ============================================================================

# 是否启用批量插入
SYNC_BULK_INSERT=true

# 事务批量大小
SYNC_TRANSACTION_BATCH_SIZE=100

# 并发同步表数量
SYNC_CONCURRENT_TABLES=3

# ============================================================================
# 监控和告警
# ============================================================================

# 是否启用同步监控
SYNC_MONITORING_ENABLED=true

# 同步失败告警阈值（连续失败次数）
SYNC_FAILURE_ALERT_THRESHOLD=3

# 数据积压告警阈值（待同步记录数）
SYNC_BACKLOG_ALERT_THRESHOLD=1000

# ============================================================================
# 数据库配置
# ============================================================================

# 边缘数据库
DB_HOST=localhost
DB_PORT=3306
DB_NAME=concrete_plant
DB_USER=root
DB_PASSWORD=your-password

# 连接池配置
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# ============================================================================
# 日志配置
# ============================================================================

# 日志级别（debug | info | warn | error）
LOG_LEVEL=info

# 日志文件路径
LOG_FILE_PATH=./logs/sync.log

# 日志文件最大大小（MB）
LOG_FILE_MAX_SIZE=10

# 日志文件保留数量
LOG_FILE_MAX_FILES=7

# ============================================================================
# 安全配置
# ============================================================================

# 是否启用HTTPS
HTTPS_ENABLED=true

# 是否验证SSL证书
SSL_VERIFY=true

# 请求签名密钥
REQUEST_SIGN_KEY=your-sign-key-here

# ============================================================================
# 开发/测试配置
# ============================================================================

# 是否为开发模式
DEV_MODE=false

# 是否启用调试日志
DEBUG_SYNC=false

# 是否模拟同步（不实际发送数据）
SYNC_DRY_RUN=false

# 测试云端API地址
TEST_CLOUD_API_URL=http://localhost:3001
