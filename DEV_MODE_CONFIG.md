# å¼€å‘æ¨¡å¼é…ç½®åˆ‡æ¢æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥çµæ´»åˆ‡æ¢äº‘ç«¯/æœ¬åœ°é…ç½®ï¼Œæ— éœ€é‡å¯åç«¯æœåŠ¡æˆ–ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿æµ‹è¯•ä¸åŒéƒ¨ç½²åœºæ™¯ã€‚

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å‰ç«¯
cd concrete-plant-web
npm run dev

# å¯åŠ¨åç«¯
cd concrete-plant-api
npm run start:dev
```

### 2. åˆ‡æ¢é…ç½®

åœ¨åº”ç”¨ç•Œé¢ä¸­ï¼š

1. **ç‚¹å‡»éƒ¨ç½²æ¨¡å¼å¾½ç« **
   - åœ¨ä¾§è¾¹æ é¡¶éƒ¨ï¼Œ"æ··å‡åœŸç®¡æ§å¹³å°"æ ‡é¢˜å³ä¾§
   - å¼€å‘æ¨¡å¼ä¸‹å¾½ç« ä¼šæ˜¾ç¤ºä¸€ä¸ªå°é½¿è½®å›¾æ ‡ âš™ï¸
   - ç‚¹å‡»å¾½ç« æ‰“å¼€é…ç½®åˆ‡æ¢å¯¹è¯æ¡†

2. **é€‰æ‹©ç›®æ ‡æ¨¡å¼**
   - ğŸ–¥ï¸ **æœ¬åœ°æ¨¡å¼ (Edge)**ï¼šæ¨¡æ‹Ÿè¾¹ç¼˜è®¾å¤‡éƒ¨ç½²
   - â˜ï¸ **äº‘ç«¯æ¨¡å¼ (Cloud)**ï¼šæ¨¡æ‹Ÿäº‘ç«¯æœåŠ¡å™¨éƒ¨ç½²

3. **åº”ç”¨é…ç½®**
   - ç‚¹å‡»"åº”ç”¨å¹¶åˆ·æ–°"æŒ‰é’®
   - é¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ä»¥åº”ç”¨æ–°é…ç½®

## ğŸ“‹ é…ç½®å·®å¼‚

### æœ¬åœ°æ¨¡å¼ (Edge)
```json
{
  "database": "sqlite",
  "features": {
    "plcCommunication": true,
    "cloudSync": true,
    "multiSiteManagement": false,
    "advancedAnalytics": false
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… ä½¿ç”¨ SQLite æ•°æ®åº“
- âœ… å¯ç”¨ PLC é€šä¿¡åŠŸèƒ½
- âœ… å¯ç”¨äº‘ç«¯åŒæ­¥åŠŸèƒ½
- âŒ ç¦ç”¨å¤šç«™ç‚¹ç®¡ç†
- âŒ ç¦ç”¨é«˜çº§åˆ†æ

### äº‘ç«¯æ¨¡å¼ (Cloud)
```json
{
  "database": "postgres",
  "features": {
    "plcCommunication": false,
    "cloudSync": false,
    "multiSiteManagement": true,
    "advancedAnalytics": true
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… ä½¿ç”¨ PostgreSQL æ•°æ®åº“
- âœ… å¯ç”¨å¤šç«™ç‚¹ç®¡ç†
- âœ… å¯ç”¨é«˜çº§åˆ†æåŠŸèƒ½
- âŒ ç¦ç”¨ PLC é€šä¿¡
- âŒ ç¦ç”¨äº‘ç«¯åŒæ­¥

## ğŸ”§ æŠ€æœ¯å®ç°

### å‰ç«¯å®ç°

é…ç½®å­˜å‚¨åœ¨ `localStorage` ä¸­ï¼š

```typescript
// è®¾ç½®é…ç½®
localStorage.setItem('dev_config_mode', 'cloud'); // æˆ– 'edge'

// è·å–é…ç½®
const mode = localStorage.getItem('dev_config_mode');

// é‡ç½®é…ç½®
localStorage.removeItem('dev_config_mode');
```

### Hook ä½¿ç”¨

```typescript
import { useRuntimeConfig } from '@/hooks/useRuntimeConfig';

function MyComponent() {
  const { config, deploymentMode, isLoading } = useRuntimeConfig();
  
  // é…ç½®ä¼šè‡ªåŠ¨æ ¹æ® localStorage ä¸­çš„è®¾ç½®è¿›è¡Œè¦†ç›–
  console.log('å½“å‰æ¨¡å¼:', deploymentMode); // 'cloud' | 'edge' | 'hybrid'
  console.log('æ•°æ®åº“ç±»å‹:', config?.database); // 'postgres' | 'sqlite'
}
```

## ğŸ¨ UI äº¤äº’

### å¾½ç« æ˜¾ç¤º

- **å¼€å‘æ¨¡å¼**ï¼š`ğŸ’» å¼€å‘ âš™ï¸` ï¼ˆå¯ç‚¹å‡»ï¼‰
- **äº‘ç«¯æ¨¡å¼**ï¼š`â˜ï¸ äº‘ç«¯` ï¼ˆä¸å¯ç‚¹å‡»ï¼‰
- **æœ¬åœ°æ¨¡å¼**ï¼š`ğŸ–¥ï¸ æœ¬åœ°` ï¼ˆä¸å¯ç‚¹å‡»ï¼‰

### é…ç½®åˆ‡æ¢å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ å¼€å‘æ¨¡å¼é…ç½®åˆ‡æ¢                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ é€‰æ‹©é…ç½®æ¨¡å¼ï¼š                       â”‚
â”‚                                     â”‚
â”‚ â—‹ ğŸ–¥ï¸ æœ¬åœ°æ¨¡å¼ (Edge)                â”‚
â”‚   â€¢ ä½¿ç”¨ SQLite æ•°æ®åº“              â”‚
â”‚   â€¢ å¯ç”¨ PLC é€šä¿¡åŠŸèƒ½               â”‚
â”‚   â€¢ å¯ç”¨äº‘ç«¯åŒæ­¥åŠŸèƒ½                â”‚
â”‚                                     â”‚
â”‚ â— â˜ï¸ äº‘ç«¯æ¨¡å¼ (Cloud)               â”‚
â”‚   â€¢ ä½¿ç”¨ PostgreSQL æ•°æ®åº“          â”‚
â”‚   â€¢ å¯ç”¨å¤šç«™ç‚¹ç®¡ç†                  â”‚
â”‚   â€¢ å¯ç”¨é«˜çº§åˆ†æåŠŸèƒ½                â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [é‡ç½®é»˜è®¤]  [å–æ¶ˆ]  [åº”ç”¨å¹¶åˆ·æ–°]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯ç”¨**
   - ç”Ÿäº§ç¯å¢ƒï¼ˆäº‘ç«¯/æœ¬åœ°ï¼‰éƒ¨ç½²æ—¶ï¼Œå¾½ç« ä¸å¯ç‚¹å‡»
   - é…ç½®ç”±ç¯å¢ƒå˜é‡å†³å®šï¼Œä¸èƒ½é€šè¿‡ UI ä¿®æ”¹

2. **éœ€è¦åˆ·æ–°é¡µé¢**
   - åˆ‡æ¢é…ç½®åä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢
   - ç¡®ä¿ä¿å­˜æœªæäº¤çš„å·¥ä½œ

3. **åç«¯é…ç½®**
   - å‰ç«¯åˆ‡æ¢åªå½±å“å‰ç«¯è¡Œä¸ºå’Œ API è°ƒç”¨
   - åç«¯éœ€è¦é…ç½®ç›¸åº”çš„æ•°æ®åº“è¿æ¥
   - å»ºè®®åŒæ—¶å‡†å¤‡ PostgreSQL å’Œ SQLite ç¯å¢ƒ

4. **æ•°æ®éš”ç¦»**
   - ä¸åŒæ¨¡å¼ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“
   - åˆ‡æ¢æ¨¡å¼ä¸ä¼šå½±å“å·²æœ‰æ•°æ®

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1ï¼šæµ‹è¯•è¾¹ç¼˜è®¾å¤‡åŠŸèƒ½
```bash
1. åˆ‡æ¢åˆ°"æœ¬åœ°æ¨¡å¼"
2. æµ‹è¯• PLC é€šä¿¡åŠŸèƒ½
3. æµ‹è¯•ç¦»çº¿æ•°æ®å­˜å‚¨
4. æµ‹è¯•äº‘ç«¯åŒæ­¥åŠŸèƒ½
```

### åœºæ™¯ 2ï¼šæµ‹è¯•äº‘ç«¯ç®¡ç†åŠŸèƒ½
```bash
1. åˆ‡æ¢åˆ°"äº‘ç«¯æ¨¡å¼"
2. æµ‹è¯•å¤šç«™ç‚¹ç®¡ç†
3. æµ‹è¯•é«˜çº§æ•°æ®åˆ†æ
4. æµ‹è¯•æŠ¥è¡¨ç”Ÿæˆ
```

### åœºæ™¯ 3ï¼šå¿«é€Ÿåˆ‡æ¢å¯¹æ¯”
```bash
1. åœ¨æœ¬åœ°æ¨¡å¼ä¸‹åˆ›å»ºæ•°æ®
2. åˆ‡æ¢åˆ°äº‘ç«¯æ¨¡å¼
3. éªŒè¯åŠŸèƒ½å·®å¼‚
4. åˆ‡æ¢å›æœ¬åœ°æ¨¡å¼
```

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹å½“å‰é…ç½®

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼š

```javascript
// æŸ¥çœ‹ localStorage é…ç½®
console.log('Dev Config:', localStorage.getItem('dev_config_mode'));

// æŸ¥çœ‹å®Œæ•´è¿è¡Œæ—¶é…ç½®
fetch('/api/config/runtime')
  .then(r => r.json())
  .then(config => console.log('Runtime Config:', config));
```

### æ‰‹åŠ¨è®¾ç½®é…ç½®

```javascript
// è®¾ç½®ä¸ºäº‘ç«¯æ¨¡å¼
localStorage.setItem('dev_config_mode', 'cloud');
location.reload();

// è®¾ç½®ä¸ºæœ¬åœ°æ¨¡å¼
localStorage.setItem('dev_config_mode', 'edge');
location.reload();

// é‡ç½®ä¸ºé»˜è®¤
localStorage.removeItem('dev_config_mode');
location.reload();
```

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `concrete-plant-web/src/components/common/DeploymentModeBadge.tsx` - å¾½ç« ç»„ä»¶
- `concrete-plant-web/src/components/common/DevModeConfigSwitcher.tsx` - é…ç½®åˆ‡æ¢å™¨
- `concrete-plant-web/src/hooks/useRuntimeConfig.ts` - é…ç½® Hook
- `packages/core/src/config/app.config.ts` - åç«¯é…ç½®ç®¡ç†

## ğŸ‰ å¿«é€Ÿå¼€å§‹

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
npm run dev

# 2. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173

# 3. ç‚¹å‡»ä¾§è¾¹æ é¡¶éƒ¨çš„ "ğŸ’» å¼€å‘ âš™ï¸" å¾½ç« 

# 4. é€‰æ‹©è¦æµ‹è¯•çš„æ¨¡å¼å¹¶åº”ç”¨

# 5. å¼€å§‹æµ‹è¯•ï¼
```

---

**æç¤º**ï¼šè¿™ä¸ªåŠŸèƒ½æå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ï¼Œè®©æ‚¨å¯ä»¥åœ¨åŒä¸€ä¸ªå¼€å‘ç¯å¢ƒä¸­å¿«é€Ÿæµ‹è¯•ä¸åŒéƒ¨ç½²åœºæ™¯çš„åŠŸèƒ½ï¼ğŸš€
